<%- include("partials/header.ejs"); %>

<h4 class="plansH text-center">My Profile</h4>
<hr id="hr">

<div class="container-fluid" style="max-width: 110em;">
    <div class="row" style="padding-top: 70px;">
        <div class="col-md-3 mr-2">
            <div class="list-group">
                <li class="list-group-item active">Personal info</li>
                <li class="list-group-item">Payment History</li>
                <li class="list-group-item">Upgrade Plan</li>
                <% if(currentUser.isFB!=true){ %>
                  <li class="list-group-item">Change Password
                    <a href="/forgot" class="stretched-link"></a>
                  </li>
                <% } %>
            </div>
        </div>
        <div class="col-md-5 mr-5">
          <form url="/user/<%= currentUser._id %>/edit">
            <label class="mt-3"><strong>Name</strong></label>
             <div>
              <div class="input-group">
                <input type="text" class="form-control profileinput" value="<%= currentUser.name %>" name="name" disabled="true">
                <div class="input-group-append" >
                  <button class="btn btn-outline-secondary editdonebtn" type="button" style="display: none;"><i class="fas fa-check"></i></button>
                  <button class="btn btn-outline-secondary editcancelbtn" type="button" style="display: none;"><i class="fas fa-times"></i></button>
                  <button class="btn btn-outline-secondary profileditbtn" type="button"><i class="fas fa-pencil-alt"></i></button>
                </div>
              </div>
              <div class="editsuccess">
                <label>edit successfull!</label>
              </div>
             </div>
            <label class="mt-3"><strong>Phone</strong></label>
            <div>
              <div class="input-group">
                <input type="text" class="form-control profileinput" value="<%= currentUser.phone %>" name="phone" disabled="true">
                <div class="input-group-append">
                  <button class="btn btn-outline-secondary editdonebtn" type="button" style="display: none;"><i class="fas fa-check"></i></button>
                  <button class="btn btn-outline-secondary editcancelbtn" type="button" style="display: none;"><i class="fas fa-times"></i></button>
                  <button class="btn btn-outline-secondary profileditbtn" type="button"><i class="fas fa-pencil-alt"></i></button>
                </div>
              </div>
              <div class="editsuccess">
                <label>edit successfull!</label>
              </div>
            </div>
            <label class="mt-3"><strong>E-mail</strong></label>
            <div>
              <div class="input-group">
                <input type="text" class="form-control profileinput" value="<%= currentUser.email %>" name="email" disabled="true">
                <div class="input-group-append">
                  <button class="btn btn-outline-secondary editdonebtn" type="button" style="display: none;"><i class="fas fa-check"></i></button>
                  <button class="btn btn-outline-secondary editcancelbtn" type="button" style="display: none;"><i class="fas fa-times"></i></button>
                  <button class="btn btn-outline-secondary profileditbtn" type="button"><i class="fas fa-pencil-alt"></i></button>
                </div>
              </div>
              <div class="editsuccess">
                <label>edit successfull!</label>
              </div>
            </div>
            <label class="mt-3"><strong>Address</strong></label>
            <div>
              <div class="input-group">
                <input type="text" class="form-control profileinput" value="<%= currentUser.address %>" name="address" disabled="true">
                <div class="input-group-append">
                  <button class="btn btn-outline-secondary editdonebtn" type="button" style="display: none;"><i class="fas fa-check"></i></button>
                  <button class="btn btn-outline-secondary editcancelbtn" type="button" style="display: none;"><i class="fas fa-times"></i></button>
                  <button class="btn btn-outline-secondary profileditbtn" type="button"><i class="fas fa-pencil-alt"></i></button>
                </div>
              </div>
              <div class="editsuccess">
                <label>edit successfull!</label>
              </div>
            </div>
          </form>
        </div>
        <div class="col-md-3">
          <form action="/upload" method="POST" enctype="multipart/form-data">
            <div class="input-group mb-3 fielupload" style="display: none;width: 320px;"r>
              <div class="input-group-prepend">
                <input type="submit" class="input-group-text" value="Upload">
              </div>
              <div class="custom-file">
                <input type="file" class="custom-file-input" name="myImage" accept="image/*" required>
                <label class="custom-file-label" for="inputGroupFile01">Choose file</label>
              </div>
            </div>
          </form>
            <div class="card profilecard">
              <% if(currentUser.profilepic){ %>
                <img class="card-img-top img-fluid" src="<%= currentUser.profilepic %>"><i class="fas fa-camera fa-2x cameraicon"></i>
              <% }else{ %>
                <img class="card-img-top img-fluid" src="https://i.ya-webdesign.com/images/avatar-png-2.png"><i class="fas fa-camera fa-2x cameraicon"></i>
             <% } %>
                 <div class="card-header text-center profilecardname">
                    <strong><%= currentUser.name %></strong>
                </div>
                <div class="card-body">
                  <canvas id="myChart"></canvas>
                </div>
            </div>
            <% const constantdata=currentUser.data %>

        </div>
    </div>
</div>


<script type="text/javascript">
  var data= <%- JSON.stringify(parseInt(currentUser.data.total)) %>
  var plan= <%- JSON.stringify(currentUser.plan) %>
  var used= <%- JSON.stringify(parseInt(currentUser.data.used)) %>
  var rem=  parseInt(data-used);
</script>

<%- include("partials/footer.ejs"); %>
<script type="text/javascript" src="/scripts/guagechart.js"></script>